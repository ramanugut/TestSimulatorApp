<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>StudyFlow - Test Simulator</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap">
</head>
<body>
    <button id="header-toggle" class="sf-menu-toggle" type="button" aria-expanded="false" aria-controls="floating-header" aria-label="Open menu" title="Open menu">
        <span class="sr-only">Open menu</span>
        <span class="sf-menu-toggle__icon" aria-hidden="true">‚ò∞</span>
    </button>

    <div id="sf-menu-backdrop" class="sf-menu-backdrop" aria-hidden="true" hidden></div>

    <nav id="floating-header" class="sf-navbar" aria-hidden="true" role="navigation">
        <div class="sf-navbar__inner">
            <div class="sf-navbar__brand">
                <div class="sf-navbar__logo">
                    <svg viewBox="0 0 24 24" aria-hidden="true">
                        <path d="M12 2a1 1 0 0 0-.894.553L8.382 8H5a1 1 0 0 0-.832 1.555l7 10a1 1 0 0 0 1.664 0l7-10A1 1 0 0 0 19 8h-3.382l-2.724-5.447A1 1 0 0 0 12 2Z" fill="currentColor"/>
                    </svg>
                </div>
                <span class="sf-navbar__title">StudyFlow</span>
            </div>
            <div class="sf-navbar__links" role="tablist" aria-label="Primary views">
                <button class="sf-navbar__link active" data-view="dashboard" role="tab" aria-selected="true">Dashboard</button>
                <button class="sf-navbar__link" data-view="practice" role="tab" aria-selected="false">Practice</button>
                <button class="sf-navbar__link" data-view="analytics" role="tab" aria-selected="false">Analytics</button>
            </div>
            <div class="sf-navbar__actions">
                <select id="test-select" hidden aria-hidden="true"></select>
                <button id="nav-theme-toggle" class="sf-icon-button" type="button" aria-label="Toggle theme">
                    <span class="sf-icon-button__sun" aria-hidden="true">‚òÄÔ∏è</span>
                    <span class="sf-icon-button__moon" aria-hidden="true">üåô</span>
                </button>
            </div>
        </div>
        <div id="sf-nav-drawer" class="sf-navbar__drawer" aria-hidden="true">
            <div class="sf-drawer__group">
                <div class="sf-drawer__field">
                    <label for="timer-input">Timer (minutes)</label>
                    <input type="number" id="timer-input" value="30" min="0" aria-describedby="timer-help">
                    <p id="timer-help" class="assistive-text">Adjust anytime during a test.</p>
                </div>
                <div class="sf-drawer__field">
                    <label for="pass-mark-input">Pass mark (%)</label>
                    <input type="number" id="pass-mark-input" value="50" min="0" max="100">
                </div>
                <div class="sf-drawer__field sf-drawer__field--file">
                    <label for="upload-test-input">Upload Test (JSON)</label>
                    <input type="file" id="upload-test-input" accept=".json" aria-describedby="upload-test-help">
                    <p id="upload-test-help" class="assistive-text">Import additional tests to expand your practice set.</p>
                </div>
                <div class="sf-drawer__actions">
                    <button id="define-test" class="btn btn-subtle" type="button" aria-haspopup="dialog" aria-expanded="false">Custom Mix</button>
                    <button id="start-test" class="btn btn-primary" type="button">Start Test</button>
                    <button id="pause-timer" class="btn btn-secondary" type="button">Pause Timer</button>
                </div>
            </div>
            <div class="sf-drawer__progress">
                <div class="sf-progress">
                    <span class="sf-progress__label">Progress</span>
                    <div class="sf-progress__bar">
                        <div id="progress-bar"></div>
                    </div>
                    <span id="progress-text">0%</span>
                </div>
                <div class="sf-drawer__timer">‚è±Ô∏è <span id="floating-time">00:00</span></div>
            </div>
        </div>
    </nav>

    <main class="sf-main">
        <section id="dashboard-view" class="sf-view active" aria-labelledby="dashboard-tab">
            <div class="sf-hero">
                <div class="sf-hero__content">
                    <div class="sf-hero__badge">
                        <span>Welcome back, Mugudiswa!</span>
                    </div>
                    <h1>Ready for your final ICT2621 exam?</h1>
                    <p>Kha hu vhaliwe, vhotori vha do zwi kona.</p>
                    <div class="sf-hero__actions">
                        <button id="dashboard-choose-test" class="btn btn-light">Choose Test</button>
                        <button id="dashboard-custom-test" class="btn btn-outline">Custom Mix</button>
                    </div>
                </div>
                <div class="sf-hero__illustration" aria-hidden="true">üéì</div>
            </div>

            <div class="sf-stats-grid">
                <article class="sf-stat-card sf-stat-card--streak">
                    <div class="sf-stat-card__icon">üî•</div>
                    <div class="sf-stat-card__body">
                        <span class="sf-stat-card__label">Day Streak</span>
                        <span id="streak-value" class="sf-stat-card__value">0 days</span>
                    </div>
                </article>
                <article class="sf-stat-card sf-stat-card--xp">
                    <div class="sf-stat-card__icon">‚≠ê</div>
                    <div class="sf-stat-card__body">
                        <span class="sf-stat-card__label">Total XP</span>
                        <span id="xp-value" class="sf-stat-card__value">0</span>
                    </div>
                </article>
                <article class="sf-stat-card sf-stat-card--badges">
                    <div class="sf-stat-card__icon">üèÜ</div>
                    <div class="sf-stat-card__body">
                        <span class="sf-stat-card__label">Badges</span>
                        <span id="badge-value" class="sf-stat-card__value">0 earned</span>
                    </div>
                </article>
                <article class="sf-stat-card sf-stat-card--pass">
                    <div class="sf-stat-card__icon">üéØ</div>
                    <div class="sf-stat-card__body">
                        <span class="sf-stat-card__label">Pass Rate</span>
                        <span id="dashboard-pass-rate" class="sf-stat-card__value">0%</span>
                    </div>
                </article>
            </div>

            <div class="sf-dashboard-grid">
                <section class="sf-card">
                    <header class="sf-card__header">
                        <h2>Recent Activity</h2>
                        <button id="dashboard-refresh-activity" class="sf-card__action" type="button">Refresh</button>
                    </header>
                    <ul id="dashboard-activity" class="sf-activity-list"></ul>
                </section>
                <section class="sf-card">
                    <header class="sf-card__header">
                        <h2>Achievements</h2>
                        <button id="new-motivation" class="sf-card__action" type="button">Inspire Me</button>
                    </header>
                    <p id="motivation-message" class="sf-motivation"></p>
                    <ul id="achievement-list" class="sf-achievement-list"></ul>
                </section>
            </div>

            <section class="sf-card">
                <header class="sf-card__header">
                    <h2>Available Tests</h2>
                    <button id="dashboard-view-tests" class="sf-card__action" type="button">View All</button>
                </header>
                <div id="dashboard-tests" class="sf-tests-grid"></div>
                <div id="dashboard-tests-empty" class="empty-state hidden">Load tests to see available sessions.</div>
            </section>
        </section>

        <section id="practice-view" class="sf-view" aria-labelledby="practice-tab" hidden>
            <div class="sf-practice-header">
                <div class="sf-practice-header__info">
                    <h2 id="practice-test-name">Practice Session</h2>
                    <div class="sf-practice-header__meta">
                        <span id="practice-question-range">Questions 0-0</span>
                        <span>‚Ä¢</span>
                        <span class="sf-practice-header__timer">‚è±Ô∏è <span id="practice-time">00:00</span></span>
                    </div>
                </div>
                <div class="sf-practice-header__actions">
                    <button id="practice-back" class="btn btn-subtle" type="button">Back</button>
                    <button id="practice-start-timer" class="btn btn-primary" type="button">Start Timer</button>
                    <button id="practice-pause-timer" class="btn btn-warning" type="button">Pause</button>
                    <button id="practice-change-test" class="btn btn-outline" type="button">Change Test</button>
                </div>
            </div>

            <div class="sf-practice-controls">
                <div class="sf-view-toggle">
                    <span>View:</span>
                    <button id="view-page" class="btn btn-chip active" type="button">10 per page</button>
                    <button id="view-all" class="btn btn-chip" type="button">View all</button>
                </div>
                <div class="sf-mode-tabs" role="tablist" aria-label="Modes">
                    <button id="mode-tab-test" class="mode-tab-button active" type="button" role="tab" aria-selected="true" aria-controls="mode-panel-test" data-mode="test">Test</button>
                    <button id="mode-tab-study" class="mode-tab-button" type="button" role="tab" aria-selected="false" aria-controls="mode-panel-test" data-mode="study">Study</button>
                    <button id="mode-tab-flashcards" class="mode-tab-button" type="button" role="tab" aria-selected="false" aria-controls="mode-panel-flashcards" data-mode="flashcards">Flashcards</button>
                </div>
            </div>

            <section class="sf-bookmark-panel" aria-label="Bookmarks">
                <div class="sf-bookmark-panel__header">
                    <h3>Bookmarks</h3>
                    <button id="cycle-bookmarks" class="btn btn-tertiary" type="button">Next Bookmark</button>
                </div>
                <div id="bookmark-list" class="bookmark-list">No bookmarks yet.</div>
            </section>

            <section id="mode-panel-test" class="mode-panel active" role="tabpanel" aria-labelledby="mode-tab-test">
                <div class="test-content">
                    <div id="result-banner" class="result-banner hidden" role="status" aria-live="polite" tabindex="-1">
                        <div class="result-main">
                            <div id="result-emoji" class="result-emoji" aria-hidden="true">üéâ</div>
                            <div class="result-text">
                                <h2 id="result-headline" class="result-headline">Great job!</h2>
                                <p id="result-summary" class="result-summary"></p>
                            </div>
                        </div>
                        <div class="result-actions">
                            <button id="result-restart" class="btn btn-primary" type="button">Restart Test</button>
                            <button id="result-review-failed" class="btn btn-secondary" type="button">Review Missed Questions</button>
                            <button id="result-review-all" class="btn btn-subtle" type="button">Review All Questions</button>
                        </div>
                    </div>
                    <section id="score-container" class="sf-score hidden" aria-live="polite" role="status">
                        <div class="sf-score__value" id="score">0%</div>
                        <p class="sf-score__message" id="result-message"></p>
                    </section>
                    <main id="questions-container" aria-live="polite"></main>
                    <div id="filter-empty-state" class="empty-state hidden">No questions match your current filter.</div>
                    <div id="pagination-controls" class="pagination hidden">
                        <div id="pagination-nav" class="pagination-nav">
                            <button id="prev-page" class="btn btn-secondary">Previous</button>
                            <span id="page-info"></span>
                            <button id="next-page" class="btn btn-primary">Next</button>
                        </div>
                        <button id="view-toggle" class="btn btn-subtle" type="button" aria-pressed="false">View All</button>
                    </div>
                </div>
            </section>

            <section id="mode-panel-flashcards" class="mode-panel" role="tabpanel" aria-labelledby="mode-tab-flashcards" aria-hidden="true">
                <div class="card-block">
                    <h2>Flashcards</h2>
                    <p class="panel-description">Tap a card to reveal the answer.</p>
                    <div id="flashcards-grid" class="flashcards-grid"></div>
                    <div id="flashcards-empty" class="empty-state">Load a test to generate flashcards.</div>
                </div>
            </section>
        </section>

        <section id="analytics-view" class="sf-view" aria-labelledby="analytics-tab" hidden>
            <div class="sf-analytics-grid">
                <section class="sf-card">
                    <header class="sf-card__header">
                        <h2>Daily Overview</h2>
                        <button id="stats-reset" class="sf-card__action" type="button">Reset Today's Stats</button>
                    </header>
                    <div class="sf-analytics-summary">
                        <div class="stat-row"><span>Tests Completed</span><span id="stats-tests-taken">0</span></div>
                        <div class="stat-row"><span>Passed</span><span id="stats-tests-passed">0</span></div>
                        <div class="stat-row"><span>Failed</span><span id="stats-tests-failed">0</span></div>
                        <div class="stat-row"><span>Abandoned</span><span id="stats-tests-abandoned">0</span></div>
                    </div>
                </section>
                <section class="sf-card">
                    <header class="sf-card__header">
                        <h2>Recent History</h2>
                        <button id="analytics-refresh" class="sf-card__action" type="button">Refresh</button>
                    </header>
                    <div class="sf-analytics-history">
                        <div>
                            <h3>Passed Tests</h3>
                            <ul id="stats-passed-list" class="history-list"></ul>
                        </div>
                        <div>
                            <h3>Failed Tests</h3>
                            <ul id="stats-failed-list" class="history-list"></ul>
                        </div>
                        <div>
                            <h3>Abandoned</h3>
                            <ul id="stats-abandoned-list" class="history-list"></ul>
                        </div>
                    </div>
                </section>
                <section class="sf-card">
                    <header class="sf-card__header">
                        <h2>Report</h2>
                    </header>
                    <div class="sf-report">
                        <p class="panel-description">Download a PDF summary of your latest session.</p>
                        <button class="btn btn-primary" id="download-report">Download Report</button>
                    </div>
                </section>
            </div>
        </section>
    </main>

    <div id="modal-backdrop" class="modal-backdrop hidden"></div>

    <div id="test-selector-modal" class="modal hidden" role="dialog" aria-modal="true" aria-labelledby="test-selector-title">
        <div class="modal-content">
            <header class="modal-header">
                <h2 id="test-selector-title">Choose a Test</h2>
                <button id="close-test-selector" class="modal-close" type="button" aria-label="Close test selector">&times;</button>
            </header>
            <p class="modal-description">Select a test to begin your practice session. Each test includes shuffled questions to keep you challenged.</p>
            <div id="test-selector-grid" class="selector-grid"></div>
            <footer class="modal-footer">
                <button id="cancel-test-selector" class="btn btn-secondary" type="button">Cancel</button>
                <button id="test-selector-custom" class="btn btn-primary" type="button">Create Custom Mix</button>
            </footer>
        </div>
    </div>

    <div id="define-test-modal" class="modal hidden" role="dialog" aria-modal="true" aria-labelledby="define-test-title">
        <div class="modal-content">
            <header class="modal-header">
                <h2 id="define-test-title">Create Custom Test</h2>
                <button id="close-define-test" class="modal-close" type="button" aria-label="Close custom test">&times;</button>
            </header>
            <form id="define-test-form" class="define-test-form">
                <section class="define-test-section">
                    <h3>Select Tests</h3>
                    <p class="modal-card-description">Combine questions from multiple tests to build a custom practice session.</p>
                    <div id="define-test-list" class="define-test-list" role="group"></div>
                </section>
                <section class="define-test-section">
                    <h3>Session Settings</h3>
                    <div class="define-test-settings">
                        <label class="input-label" for="define-test-question-count">Number of Questions</label>
                        <input type="number" id="define-test-question-count" min="1" value="10" aria-describedby="define-test-summary">
                        <label class="input-label" for="define-test-timer">Timer (minutes)</label>
                        <input type="number" id="define-test-timer" min="0" placeholder="Use current">
                    </div>
                </section>
                <p id="define-test-summary" class="define-test-summary" role="status"></p>
                <p id="define-test-error" class="define-test-error" role="alert"></p>
                <footer class="modal-footer">
                    <button type="button" id="cancel-define-test" class="btn btn-secondary">Cancel</button>
                    <button type="submit" id="define-test-start" class="btn btn-primary">Start Custom Test</button>
                </footer>
            </form>
        </div>
    </div>

    <div id="floating-actions" class="floating-actions">
        <button id="floating-actions-toggle" class="floating-actions-toggle" type="button" aria-expanded="false" aria-controls="floating-actions-panel">
            <span class="sr-only">Toggle quick actions</span>
            ‚öôÔ∏è
        </button>
        <div id="floating-actions-panel" class="floating-actions-panel">
            <button id="submit-test" class="btn btn-primary">Submit Test</button>
            <button id="reset-test" class="btn btn-secondary">Reset Test</button>
            <button id="download-results" class="btn btn-tertiary">Download Results as PDF</button>
        </div>
    </div>

    <button id="back-to-top" class="back-to-top" title="Go to top">‚¨ÜÔ∏è</button>

    <div id="achievement-toast" class="hidden"></div>

    <footer class="app-footer">StudyFlow ¬© 2025 ‚Äî Developed by Marven Ramanugu, keep learning.</footer>

    <script src="script.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.4.0/jspdf.umd.min.js"></script>
</body>
</html>
